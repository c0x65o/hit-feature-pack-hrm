version: 1

# Schema-owned permission/action catalog for HRM.
#
# This replaces legacy `permissions.actions` authored in `feature-pack.yaml`.
# The route generator merges these actions into `.hit/generated/actions.ts`.
permissions:
  packName: hrm
  packTitle: Human Resources
  actions:
    # HRM pages with explicit access toggles.
    - key: hrm.employees.access
      label: "HRM: Employees"
      description: "Access the HRM employees list."
      default_enabled: false
    - key: hrm.employees.detail.access
      label: "HRM: Employee Detail"
      description: "Access HRM employee detail pages."
      default_enabled: false
    - key: hrm.employees.edit.access
      label: "HRM: Employee Edit"
      description: "Access HRM employee edit pages."
      default_enabled: false
    - key: hrm.employees.photo.self
      label: "HRM: Update Own Photo"
      description: "Allow a user to upload/update their own employee profile photo."
      default_enabled: true
    - key: hrm.employees.photo.any
      label: "HRM: Update Employee Photos"
      description: "Allow updating other employees' profile photos (still constrained by HRM write scope)."
      default_enabled: false
    - key: hrm.employees.name.self
      label: "HRM: Update Own Name"
      description: "Allow a user to update their own employee name fields."
      default_enabled: false
    - key: hrm.org-chart.access
      label: "HRM: Org Chart"
      description: "Access the HRM org chart page."
      default_enabled: false

    # Scope Policy Tree: HRM (global) -> entity overrides.
    #
    # Scope modes:
    # - none: deny all access for this verb/entity (hide pages + block APIs)
    # - all: ignore scope (read everything)
    # - own: only owned records (employee.userEmail === current user email)
    # - location|department|division: records matching the user's org assignment(s) for that dimension (via org_user_assignments)
    #
    # These are mutually exclusive per node; the Security Groups UI renders them as dropdowns.
    - key: hrm.read.scope.none
      label: "HRM Read Scope = None"
      description: "Deny all HRM read access."
      default_enabled: false
    - key: hrm.read.scope.all
      label: "HRM Read Scope = All"
      description: "Read all HRM entities regardless of org scope."
      default_enabled: false
    - key: hrm.read.scope.own
      label: "HRM Read Scope = Own"
      description: "Read only HRM entities you own (your own employee record)."
      default_enabled: false
    - key: hrm.read.scope.location
      label: "HRM Read Scope = Location"
      description: "Read HRM entities in your location."
      default_enabled: false
    - key: hrm.read.scope.department
      label: "HRM Read Scope = Department"
      description: "Read HRM entities in your department."
      default_enabled: false
    - key: hrm.read.scope.division
      label: "HRM Read Scope = Division"
      description: "Read HRM entities in your division."
      default_enabled: false

    - key: hrm.write.scope.none
      label: "HRM Write Scope = None"
      description: "Deny all HRM write access."
      default_enabled: false
    - key: hrm.write.scope.all
      label: "HRM Write Scope = All"
      description: "Edit all HRM entities regardless of org scope."
      default_enabled: false
    - key: hrm.write.scope.own
      label: "HRM Write Scope = Own"
      description: "Edit only HRM entities you own (your own employee record)."
      default_enabled: false
    - key: hrm.write.scope.location
      label: "HRM Write Scope = Location"
      description: "Edit HRM entities in your location."
      default_enabled: false
    - key: hrm.write.scope.department
      label: "HRM Write Scope = Department"
      description: "Edit HRM entities in your department."
      default_enabled: false
    - key: hrm.write.scope.division
      label: "HRM Write Scope = Division"
      description: "Edit HRM entities in your division."
      default_enabled: false

    # Employees override (optional): if set, overrides hrm.read.scope.* for employees only.
    - key: hrm.employees.read.scope.none
      label: "HRM Employees Read Scope = None"
      description: "Deny all employee read access."
      default_enabled: false
    - key: hrm.employees.read.scope.all
      label: "HRM Employees Read Scope = All"
      description: "Read employees regardless of org scope."
      default_enabled: false
    - key: hrm.employees.read.scope.own
      label: "HRM Employees Read Scope = Own"
      description: "Read only your own employee record."
      default_enabled: false
    - key: hrm.employees.read.scope.location
      label: "HRM Employees Read Scope = Location"
      description: "Read employees in your location."
      default_enabled: false
    - key: hrm.employees.read.scope.department
      label: "HRM Employees Read Scope = Department"
      description: "Read employees in your department."
      default_enabled: false
    - key: hrm.employees.read.scope.division
      label: "HRM Employees Read Scope = Division"
      description: "Read employees in your division."
      default_enabled: false

    - key: hrm.employees.write.scope.none
      label: "HRM Employees Write Scope = None"
      description: "Deny all employee write access."
      default_enabled: false
    - key: hrm.employees.write.scope.all
      label: "HRM Employees Write Scope = All"
      description: "Edit employees regardless of org scope."
      default_enabled: false
    - key: hrm.employees.write.scope.own
      label: "HRM Employees Write Scope = Own"
      description: "Edit only your own employee record."
      default_enabled: false
    - key: hrm.employees.write.scope.location
      label: "HRM Employees Write Scope = Location"
      description: "Edit employees in your location."
      default_enabled: false
    - key: hrm.employees.write.scope.department
      label: "HRM Employees Write Scope = Department"
      description: "Edit employees in your department."
      default_enabled: false
    - key: hrm.employees.write.scope.division
      label: "HRM Employees Write Scope = Division"
      description: "Edit employees in your division."
      default_enabled: false

    - key: hrm.employees.sync
      label: "HRM: Sync Employees"
      description: "Manually sync HRM employees with auth users."
      default_enabled: false

    # Employee picker permission (for reference fields in other entities)
    - key: hrm.employees.picker
      label: "HRM: Employee Picker"
      description: "Search employees via autocomplete picker (for manager fields in org dimensions, etc.). Does not grant access to the full HRM employee list or details."
      default_enabled: true

    # ─────────────────────────────────────────────────────────────────────────────
    # POSITIONS
    # ─────────────────────────────────────────────────────────────────────────────
    - key: hrm.positions.access
      label: "HRM: Positions"
      description: "Access the HRM positions list."
      default_enabled: false
    - key: hrm.positions.manage
      label: "HRM: Manage Positions"
      description: "Create, edit, and delete positions."
      default_enabled: false
    - key: hrm.positions.create
      label: "HRM: Create Position"
      description: "Create new positions (required by require_create authz flag)."
      default_enabled: false

    # ─────────────────────────────────────────────────────────────────────────────
    # PTO / TIME OFF
    # ─────────────────────────────────────────────────────────────────────────────
    - key: hrm.setup.leave-types.access
      label: "HRM Setup: Leave Types"
      description: "Access HRM setup: manage leave types."
      default_enabled: false
    - key: hrm.setup.leave-types.manage
      label: "HRM Setup: Manage Leave Types"
      description: "Create, edit, and delete leave types."
      default_enabled: false
    - key: hrm.setup.leave-types.create
      label: "HRM Setup: Create Leave Type"
      description: "Create leave types (required by require_create authz flag)."
      default_enabled: false
    - key: hrm.leaveTypes.create
      label: "HRM: Create Leave Type"
      description: "Create leave types (required by require_create for hrm.leaveType)."
      default_enabled: false

    - key: hrm.setup.holidays.access
      label: "HRM Setup: Holidays"
      description: "Access HRM setup: manage company holidays."
      default_enabled: false
    - key: hrm.setup.holidays.manage
      label: "HRM Setup: Manage Holidays"
      description: "Create, edit, and delete company holidays."
      default_enabled: false
    - key: hrm.setup.holidays.create
      label: "HRM Setup: Create Holiday"
      description: "Create holidays (required by require_create authz flag)."
      default_enabled: false
    - key: hrm.holidays.create
      label: "HRM: Create Holiday"
      description: "Create holidays (required by require_create for hrm.holiday)."
      default_enabled: false

    - key: hrm.setup.pto-policies.access
      label: "HRM Setup: PTO Policies"
      description: "Access HRM setup: manage PTO policies."
      default_enabled: false
    - key: hrm.setup.pto-policies.manage
      label: "HRM Setup: Manage PTO Policies"
      description: "Create, edit, and delete PTO policies."
      default_enabled: false
    - key: hrm.setup.pto-policies.create
      label: "HRM Setup: Create PTO Policy"
      description: "Create PTO policies (required by require_create authz flag)."
      default_enabled: false
    - key: hrm.ptoPolicies.create
      label: "HRM: Create PTO Policy"
      description: "Create PTO policies (required by require_create for hrm.ptoPolicy)."
      default_enabled: false

    - key: hrm.setup.pto-assignments.access
      label: "HRM Setup: PTO Assignments"
      description: "Access HRM setup: assign PTO policies to employees or org groups."
      default_enabled: false
    - key: hrm.setup.pto-assignments.manage
      label: "HRM Setup: Manage PTO Assignments"
      description: "Create, edit, and delete PTO policy assignments."
      default_enabled: false
    - key: hrm.setup.pto-assignments.create
      label: "HRM Setup: Create PTO Assignment"
      description: "Create PTO assignments (required by require_create authz flag)."
      default_enabled: false
    - key: hrm.ptoPolicyAssignments.create
      label: "HRM: Create PTO Assignment"
      description: "Create PTO assignments (required by require_create for hrm.ptoPolicyAssignment)."
      default_enabled: false

    - key: hrm.pto.requests.access
      label: "HRM PTO: Requests"
      description: "Access PTO request list and detail pages."
      default_enabled: false
    - key: hrm.pto.requests.manage
      label: "HRM PTO: Manage Requests"
      description: "Create, edit, and delete PTO requests."
      default_enabled: false
    - key: hrm.pto.requests.create
      label: "HRM PTO: Create Request"
      description: "Create PTO requests (required by require_create authz flag)."
      default_enabled: false
    - key: hrm.ptoRequests.create
      label: "HRM: Create PTO Request"
      description: "Create PTO requests (required by require_create for hrm.ptoRequest)."
      default_enabled: false
    - key: hrm.pto.requests.approve
      label: "HRM PTO: Approve Requests"
      description: "Approve or reject PTO requests."
      default_enabled: false

    - key: hrm.pto.requests.self.access
      label: "HRM PTO: My Requests"
      description: "Access your own PTO requests."
      default_enabled: true
    - key: hrm.pto.requests.self.create
      label: "HRM PTO: Submit Own Request"
      description: "Create PTO requests for yourself."
      default_enabled: true

    - key: hrm.pto.balances.access
      label: "HRM PTO: Balances"
      description: "Access PTO balances."
      default_enabled: false

    - key: hrm.pto.ledger.access
      label: "HRM PTO: Ledger"
      description: "Access PTO balance ledger entries."
      default_enabled: false
    - key: hrm.pto.ledger.adjust
      label: "HRM PTO: Ledger Adjustments"
      description: "Create manual PTO balance adjustments."
      default_enabled: false
    - key: hrm.ptoLedgerEntries.create
      label: "HRM: Create PTO Ledger Entry"
      description: "Create PTO ledger entries (required by require_create for hrm.ptoLedgerEntry)."
      default_enabled: false
