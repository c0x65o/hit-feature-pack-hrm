version: 1

# Pack-owned "special" API routes (schema-visible).
#
# These are endpoints that are NOT the schema-generated CRUD routes derived from `entities.*.api.resource`.
# They must be explicitly declared here so `hit schema validate` can enforce consistency and prevent drift.
api:
  routes:
    # Current user's employee profile
    - path: /api/hrm/employees/me
      methods: [GET, PUT]
      handler: employees-me
      description: "Get or upsert the current user's employee profile (name basics)."

    # User directory
    - path: /api/hrm/directory/users
      methods: [GET]
      handler: directory-users
      description: "User directory with display names enriched from HRM employees (fallbacks to auth profile_fields/email)."

    # Direct reports for an employee
    - path: /api/hrm/employees/[id]/direct-reports
      methods: [GET]
      handler: employees-direct-reports
      description: "Get direct reports for an employee"

    # Org tree for all employees
    - path: /api/hrm/employees/org-tree
      methods: [GET]
      handler: employees-org-tree
      description: "Get the org tree for all employees in scope"

    # Employee photo upload
    - path: /api/hrm/employees/[id]/photo
      methods: [PUT]
      handler: employees-photo
      description: "Update employee profile photo (self or admin)"
